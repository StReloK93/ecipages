import{s as k,a as B,_ as U,b as q,c as D}from"./BaseForm.vue_vue_type_script_setup_true_lang-C2v4_LeH.js";import{s as E}from"./index-CBr-MpG8.js";import{d as R,v as I,g as b,w as l,a as x,b as o,p as w,h as V,t as $,o as _,k as T,x as S,c as j,y as F,u as C}from"./app-Dqq4a65M.js";import{T as h}from"./TransportTypeRepo-Djz1Rucm.js";import"./useFetch-D45EbHv3.js";const M={class:"mb-4"},O=R({__name:"FormCreateTransportType",props:{submit:{type:Function}},setup(z){const m=I({name:"",name_ru:""}),v=({values:r})=>{const t={},u={message:"To'ldiring"};return r.name||(t.name=[u]),r.name_ru||(t.name_ru=[u]),{values:r,errors:t}};return(r,t)=>{const u=k,f=B;return _(),b(U,{submit:r.submit,resolver:v,initialValues:m,onClose:t[0]||(t[0]=d=>r.$emit("close"))},{default:l(d=>{var s,e;return[x("div",M,[o(u,{name:"name",severity:"contrast",type:"text",placeholder:"Nomi",size:"small",fluid:""}),(s=d.form.name)!=null&&s.invalid?(_(),b(f,{key:0,severity:"error",size:"small",variant:"simple"},{default:l(()=>[V($(d.form.name.error.message),1)]),_:2},1024)):w("",!0)]),x("div",null,[o(u,{name:"name_ru",type:"text",placeholder:"Nomi(ru)",size:"small",fluid:""}),(e=d.form.name_ru)!=null&&e.invalid?(_(),b(f,{key:0,severity:"error",size:"small",variant:"simple"},{default:l(()=>[V($(d.form.name_ru.error.message),1)]),_:2},1024)):w("",!0)])]}),_:1},8,["submit","initialValues"])}}}),Q={class:"mb-3 text-end"},J=R({__name:"TransportTypeGuidePage",setup(z){const m=T(!1),v=T([]),r=S(),{data:t}=h.index();async function u(s){await new Promise((e,n)=>{h.store(s,({data:i})=>{var p;e(!0),(p=t.value)==null||p.push(i),m.value=!1})})}const f=s=>{r.require({message:`(${s.name}) - Aniq o'chirmoqchimisiz?`,header:"O'chirish",rejectProps:{label:"Bekor qilish",severity:"secondary",outlined:!0},acceptProps:{label:"O'chirish",severity:"danger"},accept:()=>{h.destroy(s.id,()=>{var n,i;const e=(n=t.value)==null?void 0:n.findIndex(p=>p.id==s.id);e>-1&&((i=t.value)==null||i.splice(e,1))})}})};function d(s){var i;let{newData:e,index:n}=s;h.update(e.id,e),(i=t.value)!=null&&i.length&&(t.value[n].name=e.name,t.value[n].name_ru=e.name_ru)}return(s,e)=>{const n=F,i=E,p=k,y=q,N=D;return _(),j("div",null,[x("main",Q,[o(n,{icon:"pi pi-plus",label:"Qo'shish",size:"small",severity:"contrast",onClick:e[0]||(e[0]=a=>m.value=!0)}),o(i,{header:"Qurilma turi qo'shish","show-close-icon":!1,visible:m.value,"onUpdate:visible":e[2]||(e[2]=a=>m.value=a),position:"right"},{default:l(()=>[o(O,{onClose:e[1]||(e[1]=a=>m.value=!1),submit:u})]),_:1},8,["visible"])]),C(t)?(_(),b(N,{key:0,size:"small",editingRows:v.value,"onUpdate:editingRows":e[3]||(e[3]=a=>v.value=a),value:C(t),editMode:"row",dataKey:"id",onRowEditSave:d},{default:l(()=>[o(y,{field:"name",header:"Nomi"},{editor:l(({data:a,field:c})=>[o(p,{modelValue:a[c],"onUpdate:modelValue":g=>a[c]=g,type:"text",size:"small",fluid:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),o(y,{field:"name_ru",header:"Nomi (ru)"},{editor:l(({data:a,field:c})=>[o(p,{modelValue:a[c],"onUpdate:modelValue":g=>a[c]=g,type:"text",size:"small",fluid:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),o(y,{rowEditor:!0,style:{width:"120px"},bodyStyle:"text-align:right"}),o(y,{style:{width:"50px"}},{body:l(({data:a})=>[o(n,{icon:"pi pi-trash",type:"button",onClick:c=>f(a),severity:"secondary",variant:"text",rounded:""},null,8,["onClick"])]),_:1})]),_:1},8,["editingRows","value"])):w("",!0)])}}});export{J as default};
